{"ast":null,"code":"import _ from 'lodash';\nimport React from 'react';\nimport PropTypes, { shape } from 'prop-types';\nimport Validation from '../Validation/Validation';\nimport TextField from '../TextField/TextField';\nimport reducers from '../TextField/TextField.reducers';\nimport { lucidClassNames } from '../../util/style-helpers';\nimport { findTypes } from '../../util/component-types';\nconst cx = lucidClassNames.bind('&-TextFieldValidated');\nconst {\n  any,\n  object,\n  string,\n  bool\n} = PropTypes;\nconst TextFieldValidatedError = _props => null;\nTextFieldValidatedError.displayName = 'TextFieldValidated.Error';\nTextFieldValidatedError.peek = {\n  description: `Content that will be displayed as an error message.`\n};\nTextFieldValidatedError.propName = 'Error';\n/** TODO: Remove the nonPassThroughs when the component is converted to a functional component */\nconst nonPassThroughs = ['style', 'className', 'Error', 'Info', 'Success', 'initialState'];\nclass TextFieldValidated extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.textFieldRef = React.createRef();\n    this.focus = () => {\n      this.textFieldRef.current && this.textFieldRef.current.focus();\n    };\n  }\n  render() {\n    const {\n      className,\n      style,\n      ...passThroughs\n    } = this.props;\n    let childProps;\n    if (this.props.Error) {\n      childProps = _.map(findTypes(this.props, TextFieldValidated.Error), 'props');\n    } else if (this.props.Info) {\n      childProps = [this.props.Info];\n    } else if (this.props.Success && this.props.Success.message) {\n      childProps = [this.props.Success.message];\n    }\n    const isSuccess = !this.props.Error && !this.props.Info && this.props.Success;\n    return React.createElement(Validation, {\n      className: cx('&', className, {\n        '-info': !this.props.Error && this.props.Info,\n        '-success': !this.props.Error && !this.props.Info && this.props.Success,\n        '-disappearing': isSuccess && this.props.Success && this.props.Success.disappearing\n      }),\n      style: style,\n      Error: childProps\n    }, React.createElement(TextField, {\n      ..._.omit(passThroughs, nonPassThroughs),\n      ref: this.textFieldRef\n    }));\n  }\n}\nTextFieldValidated.displayName = 'TextFieldValidated';\nTextFieldValidated.Error = TextFieldValidatedError;\nTextFieldValidated.peek = {\n  description: `A composite of \\`TextField\\` and \\`Validation\\`.`,\n  categories: ['controls', 'text']\n};\nTextFieldValidated.reducers = reducers;\nTextFieldValidated.propTypes = {\n  /**\n      Passed to the root container.\n  */\n  style: object,\n  /**\n      Passed to the root container.\n  */\n  className: string,\n  /**\n      Prop alternative to Error child component\n  */\n  Error: any,\n  /**\n      Optional information text that is styled less aggressively than an error\n   */\n  Info: string,\n  /**\n      Optional information text that is styled as \"success\". Also contains\n    `disappearing` prop for message that appears and fades away.\n   */\n  Success: shape({\n    message: string,\n    disappearing: bool\n  })\n};\nTextFieldValidated.defaultProps = TextField.defaultProps;\nexport default TextFieldValidated;","map":{"version":3,"mappings":"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","names":["_","React","PropTypes","shape","Validation","TextField","reducers","lucidClassNames","findTypes","cx","bind","any","object","string","bool","TextFieldValidatedError","_props","displayName","peek","description","propName","nonPassThroughs","TextFieldValidated","Component","constructor","createRef","textFieldRef","current","focus","render","className","style","passThroughs","props","childProps","Error","map","Info","Success","message","isSuccess","disappearing","omit","ref","categories","defaultProps"],"sources":["/home/skanda/node_modules/lucid-ui/src/components/TextFieldValidated/TextFieldValidated.tsx"],"sourcesContent":["import _ from 'lodash';\nimport React from 'react';\nimport PropTypes, { shape } from 'prop-types';\n\nimport Validation, { IValidationProps } from '../Validation/Validation';\nimport TextField, {\n\tITextFieldPropsWithPassThroughs,\n} from '../TextField/TextField';\nimport reducers from '../TextField/TextField.reducers';\nimport { lucidClassNames } from '../../util/style-helpers';\nimport { findTypes } from '../../util/component-types';\n\nconst cx = lucidClassNames.bind('&-TextFieldValidated');\n\nconst { any, object, string, bool } = PropTypes;\n\nexport interface ITextFieldValidatedErrorProps extends IValidationProps {\n\tdescription?: string;\n}\n\nconst TextFieldValidatedError = (_props: ITextFieldValidatedErrorProps): null =>\n\tnull;\nTextFieldValidatedError.displayName = 'TextFieldValidated.Error';\nTextFieldValidatedError.peek = {\n\tdescription: `Content that will be displayed as an error message.`,\n};\nTextFieldValidatedError.propName = 'Error';\n\n/** TODO: Remove the nonPassThroughs when the component is converted to a functional component */\nconst nonPassThroughs = [\n\t'style',\n\t'className',\n\t'Error',\n\t'Info',\n\t'Success',\n\t'initialState',\n];\n\nexport interface ITextFieldValidatedProps\n\textends ITextFieldPropsWithPassThroughs {\n\tError?: React.ReactNode;\n\tInfo?: string;\n\tSuccess?: {\n\t\tmessage: string;\n\t\tdisappearing?: boolean;\n\t};\n}\n\nexport interface ITextFieldValidatedState {\n\tvalue: string | number;\n}\n\nclass TextFieldValidated extends React.Component<\n\tITextFieldValidatedProps,\n\tITextFieldValidatedState\n> {\n\tstatic displayName = 'TextFieldValidated';\n\n\tstatic Error = TextFieldValidatedError;\n\n\tstatic peek = {\n\t\tdescription: `A composite of \\`TextField\\` and \\`Validation\\`.`,\n\t\tcategories: ['controls', 'text'],\n\t};\n\n\tstatic reducers = reducers;\n\n\tstatic propTypes = {\n\t\t/**\n\t\t\tPassed to the root container.\n\t\t*/\n\t\tstyle: object,\n\n\t\t/**\n\t\t\tPassed to the root container.\n\t\t*/\n\t\tclassName: string,\n\n\t\t/**\n\t\t\tProp alternative to Error child component\n\t\t*/\n\t\tError: any,\n\n\t\t/**\n\t\t\tOptional information text that is styled less aggressively than an error\n\t\t */\n\t\tInfo: string,\n\n\t\t/**\n\t\t\tOptional information text that is styled as \"success\". Also contains\n\t\t  `disappearing` prop for message that appears and fades away.\n\t\t */\n\t\tSuccess: shape({\n\t\t\tmessage: string,\n\t\t\tdisappearing: bool,\n\t\t}),\n\t};\n\n\tstatic defaultProps = TextField.defaultProps;\n\n\tprivate textFieldRef = React.createRef<TextField>();\n\n\tfocus = () => {\n\t\tthis.textFieldRef.current && this.textFieldRef.current.focus();\n\t};\n\n\trender() {\n\t\tconst { className, style, ...passThroughs } = this.props;\n\n\t\tlet childProps;\n\n\t\tif (this.props.Error) {\n\t\t\tchildProps = _.map(\n\t\t\t\tfindTypes(this.props, TextFieldValidated.Error),\n\t\t\t\t'props'\n\t\t\t);\n\t\t} else if (this.props.Info) {\n\t\t\tchildProps = [this.props.Info];\n\t\t} else if (this.props.Success && this.props.Success.message) {\n\t\t\tchildProps = [this.props.Success.message];\n\t\t}\n\n\t\tconst isSuccess =\n\t\t\t!this.props.Error && !this.props.Info && this.props.Success;\n\n\t\treturn (\n\t\t\t<Validation\n\t\t\t\tclassName={cx('&', className, {\n\t\t\t\t\t'-info': !this.props.Error && this.props.Info,\n\t\t\t\t\t'-success':\n\t\t\t\t\t\t!this.props.Error && !this.props.Info && this.props.Success,\n\t\t\t\t\t'-disappearing':\n\t\t\t\t\t\tisSuccess && this.props.Success && this.props.Success.disappearing,\n\t\t\t\t})}\n\t\t\t\tstyle={style}\n\t\t\t\tError={childProps}\n\t\t\t>\n\t\t\t\t<TextField\n\t\t\t\t\t{...(_.omit(passThroughs, nonPassThroughs) as any)}\n\t\t\t\t\tref={this.textFieldRef}\n\t\t\t\t/>\n\t\t\t</Validation>\n\t\t);\n\t}\n}\n\nexport default TextFieldValidated;\n"]},"metadata":{},"sourceType":"module"}